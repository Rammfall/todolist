(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(78)},38:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(29),i=a.n(s),r=a(2),c=a(3),o=a(5),m=a(4),u=a(6),d=a(12),p=a(14);a(38);var h=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).setState({logLinks:[{to:"/",title:"Home",exact:!0},{to:"/login/",title:"Login",exact:!1},{to:"/register/",title:"Register",exact:!1}],regLinks:[{to:"/",title:"Home",exact:!0},{to:"/dashboard/",title:"Dashboard",exact:!1},{to:"/profile/",title:"Profile",exact:!1}]}),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"logOut",value:function(e){e.preventDefault(),localStorage.removeItem("usertoken"),this.props.history.push("/")}},{key:"render",value:function(){var e=l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{exact:!1,children:function(e){var t=e.match;return l.a.createElement("li",{className:"nav__item"},console.log(t),l.a.createElement(d.b,{to:"/login",className:t?"nav__link entered":"nav__link"},"Login"))}}),l.a.createElement("li",{className:"nav__item"},l.a.createElement(d.b,{to:"/register",className:"nav__link"},"Registration"))),t=l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{className:"nav__item"},l.a.createElement(d.b,{to:"/dashboard",className:"nav__link"},"Dashboard")),l.a.createElement("li",{className:"nav__item"},l.a.createElement(d.b,{to:"/profile",className:"nav__link"},"Account")),l.a.createElement("li",{className:"nav__item"},l.a.createElement(d.b,{to:"/logout",className:"nav__link",onClick:this.logOut.bind(this)},"Log out")));return l.a.createElement("header",{className:"header"},l.a.createElement("div",{className:"container header__container"},l.a.createElement("a",{href:"/",className:"logo"},"React ToDo List"),l.a.createElement("nav",{className:"nav"},l.a.createElement("ul",{className:"nav__list"},l.a.createElement("li",{className:"nav__item"},l.a.createElement(d.b,{to:"/",className:"nav__link"},"Home")),localStorage.usertoken?t:e))))}}]),t}(n.Component),_=Object(p.d)(h);a(47);function f(){return l.a.createElement("footer",{className:"footer"},l.a.createElement("div",{className:"container footer__container"},l.a.createElement("a",{href:"/",className:"logo-small"},"React ToDo App"),l.a.createElement("p",{className:"footer__year"},"2019"),l.a.createElement("a",{href:"https://github.com/rammfall",className:"footer__link",target:"_blank",rel:"noopener noreferrer"},"My GitHub")))}a(48);var b=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"landing"},l.a.createElement("h1",{className:"landing__title title-one"},"Welcome!"),l.a.createElement("p",{className:"landing__text text"},"It is a simplest ToDo list!"),l.a.createElement("h2",{className:"landing__subtitle title"},"You can there:"),l.a.createElement("ul",{className:"landing__list"},l.a.createElement("li",{className:"landing__list-item"},"Register and login"),l.a.createElement("li",{className:"landing__list-item"},"Create, update and remove own projects"),l.a.createElement("li",{className:"landing__list-item"},"Create, update and delete tasks")),l.a.createElement("h2",{className:"landing__subtitle title"},"The app created with:"),l.a.createElement("ul",{className:"landing__list"},l.a.createElement("li",{className:"landing__list-item"},"Node.js(Express.js)"),l.a.createElement("li",{className:"landing__list-item"},"MySQL(Sequelize for models and connection with DB)"),l.a.createElement("li",{className:"landing__list-item"},"JSON Web Token(for authorization)"),l.a.createElement("li",{className:"landing__list-item"},"React(built with Create React App)"),l.a.createElement("li",{className:"landing__list-item"},"SASS(for flexible work with CSS)"),l.a.createElement("li",{className:"landing__list-item"},"Axios(for cross browser queries on server)"),l.a.createElement("li",{className:"landing__list-item"},"Eslint and Stylelint(for linting code)"),l.a.createElement("li",{className:"landing__list-item"},"Heroku with ClearDB")))}}]),t}(n.Component),E=a(13),v=a(1),g=a(16),N=a.n(g),j=function(e){e.data.message},k=N.a.create({timeout:2e3,headers:{Authorization:localStorage.usertoken?"2 ".concat(localStorage.usertoken):" Token is not get"}}),O=function(e){return k.post("/projects/put",e).then(function(e){return e.data}).catch(function(e){return j(e)})},y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",formErrors:{email:"",password:""},emailValid:!1,passwordValid:!1,formValid:!1},a.onChange=a.onChange.bind(Object(v.a)(Object(v.a)(a))),a.onSubmit=a.onSubmit.bind(Object(v.a)(Object(v.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"validateField",value:function(e,t){var a=this.state.formErrors,n=this.state.emailValid,l=this.state.passwordValid;switch(e){case"email":n=t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i),a.email=n?"":" is invalid";break;case"password":l=t.length>=6,a.password=l?"":" is too short"}this.setState({formErrors:a,emailValid:n,passwordValid:l},this.validateForm)}},{key:"validateForm",value:function(){this.setState({formValid:this.state.emailValid&&this.state.passwordValid})}},{key:"onChange",value:function(e){var t=this,a=e.target.name,n=e.target.value;this.setState(Object(E.a)({},a,n),function(){t.validateField(a,n)})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),function(e){return N.a.post("users/login",{email:e.email,password:e.password}).then(function(e){return e.data}).catch(function(e){console.log(e)})}({email:this.state.email,password:this.state.password}).then(function(e){console.log(e),"error"!==e.status&&(localStorage.usertoken=e.token,t.props.history.push("/profile"))})}},{key:"render",value:function(){return l.a.createElement("form",{className:"form",onSubmit:this.onSubmit},l.a.createElement("h1",{className:"form__title"},"Log in"),l.a.createElement("p",{className:"form__description"},"on ToDo list for Ruby Garage"),l.a.createElement("div",{className:"form__group"},l.a.createElement("div",{className:"input","data-error":""},l.a.createElement("input",{type:"email",className:"input__field",name:"email",placeholder:"Email",required:!0,onChange:this.onChange}),l.a.createElement("label",{className:"input__label"},"Email"))),l.a.createElement("div",{className:"form__group"},l.a.createElement("div",{className:"input"},l.a.createElement("input",{type:"password",className:"input__field",name:"password",placeholder:"Password",required:!0,onChange:this.onChange}),l.a.createElement("label",{className:"input__label"},"Password"))),l.a.createElement("button",{className:"btn color-btn"},"Log in"))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={first_name:"",last_name:"",email:"",password:""},a.onChange=a.onChange.bind(Object(v.a)(Object(v.a)(a))),a.onSubmit=a.onSubmit.bind(Object(v.a)(Object(v.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){this.setState(Object(E.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a,n={first_name:this.state.first_name,last_name:this.state.last_name,email:this.state.email,password:this.state.password};(a=n,N.a.post("users/register",{first_name:a.first_name,last_name:a.last_name,email:a.email,password:a.password}).then(function(e){console.log("Registered")})).then(function(){t.props.history.push("/login")})}},{key:"render",value:function(){return l.a.createElement("form",{className:"form"},l.a.createElement("h1",{className:"form__title"},"Sign in"),l.a.createElement("p",{className:"form__description"},"on ToDo list for Ruby Garage"),l.a.createElement("div",{className:"form__group"},l.a.createElement("div",{className:"input","data-error":""},l.a.createElement("input",{type:"text",className:"input__field",placeholder:"First name",required:!0}),l.a.createElement("label",{className:"input__label"},"First name"))),l.a.createElement("div",{className:"form__group"},l.a.createElement("div",{className:"input","data-error":""},l.a.createElement("input",{type:"text",className:"input__field",placeholder:"Last name",required:!0}),l.a.createElement("label",{className:"input__label"},"Last name"))),l.a.createElement("div",{className:"form__group"},l.a.createElement("div",{className:"input","data-error":""},l.a.createElement("input",{type:"email",className:"input__field",placeholder:"Email",required:!0}),l.a.createElement("label",{className:"input__label"},"Email"))),l.a.createElement("div",{className:"form__group"},l.a.createElement("div",{className:"input"},l.a.createElement("input",{type:"password",className:"input__field",placeholder:"Password",required:!0}),l.a.createElement("label",{className:"input__label"},"Password"))),l.a.createElement("button",{className:"btn color-btn"},"Sign in"))}}]),t}(n.Component),w=a(32),C=a.n(w),D=(a(70),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={first_name:"",last_name:"",email:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.usertoken,t=C()(e);console.log(1),this.setState({first_name:t.first_name,last_name:t.last_name,email:t.email})}},{key:"render",value:function(){return l.a.createElement("div",{className:"profile"},l.a.createElement("h1",{className:"title profile__title"},"Your Profile"),l.a.createElement("dl",{className:"profile__list"},l.a.createElement("dt",{className:"profile__term"},"First name: "),l.a.createElement("dd",{className:"profile__description"},this.state.first_name),l.a.createElement("dt",{className:"profile__term"},"Last name: "),l.a.createElement("dd",{className:"profile__description"},this.state.last_name),l.a.createElement("dt",{className:"profile__term"},"Email: "),l.a.createElement("dd",{className:"profile__description"},this.state.email)))}}]),t}(n.Component)),L=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={data:a.props.data,isAlive:!0},a.clickDelete=a.clickDelete.bind(Object(v.a)(Object(v.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"clickDelete",value:function(){var e,t=this;(e={id:"".concat(this.state.data.id)},k.post("/tasks/delete",e).then(function(e){return e}).catch(function(e){return console.log(e)})).then(function(){t.setState({isAlive:!1})}).catch()}},{key:"render",value:function(){var e=this.state.data,t=e.name,a=e.deadline;return this.state.isAlive?l.a.createElement("li",{className:"task"},l.a.createElement("h4",{className:"task__title"},t),l.a.createElement("div",{className:"task__date"},a),l.a.createElement("button",{className:"btn btn-color"},"Edit task"),l.a.createElement("button",{className:"btn btn-danger",onClick:this.clickDelete},"Delete task")):""}}]),t}(n.Component),I=(a(71),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={projectId:a.props.projectId,isLoading:!0,tasks:[],error:null,newItem:""},a.onSubmit=a.onSubmit.bind(Object(v.a)(Object(v.a)(a))),a.onChange=a.onChange.bind(Object(v.a)(Object(v.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onSubmit",value:function(e){var t,a=this;e.preventDefault(),(t={project_id:"".concat(this.state.projectId),name:this.state.newItem.name,deadline:this.state.newItem.deadline},k.post("/tasks/put",t).then(function(e){return e.data}).catch(function(e){return j(e)})).then(function(e){var t=a.state.tasks||[];t.push(e.info),a.setState({tasks:t})}).catch(function(e){return console.log(e)})}},{key:"onChange",value:function(e){var t=e.target.name,a=e.target.value;console.log(this.state),this.setState({newItem:Object(E.a)({},t,a)})}},{key:"fetchTasks",value:function(){var e,t=this;console.log(this.props.project_id),(e={id:"".concat(this.props.projectId)},k.post("/tasks/get",e).then(function(e){return e}).catch(function(e){return e})).then(function(e){t.setState({tasks:e.data,isLoading:!1})}).catch(function(e){t.setState({error:e.response,isLoading:!1})})}},{key:"componentDidMount",value:function(){this.fetchTasks()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.tasks;return l.a.createElement("div",{className:"tasks"},l.a.createElement("h3",{className:"tasks__title"},"Project tasks:"),l.a.createElement("ul",{className:"tasks__list"},t||void 0===a?l.a.createElement("p",{className:"load-animation"},"Loading..."):a.map(function(e){return l.a.createElement(L,{data:e,key:e.id})})),l.a.createElement("form",{className:"tasks__form",onSubmit:this.onSubmit},l.a.createElement("div",{className:"form__group tasks__form-group"},l.a.createElement("div",{className:"input"},l.a.createElement("input",{type:"text",name:"name",placeholder:"Task name",className:"input__field",onChange:this.onChange,required:!0}),l.a.createElement("label",{className:"input__label"},"Task name"))),l.a.createElement("div",{className:"form__group tasks__form-group"},l.a.createElement("div",{className:"input"},l.a.createElement("input",{type:"date",name:"deadline",placeholder:"Deadline task",className:"input__field input__date",required:!0}),l.a.createElement("label",{className:"input__label"},"Task deadline"))),l.a.createElement("button",{type:"submit",className:"btn btn-color"},"Add task")))}}]),t}(n.Component)),x=(a(72),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={isAlive:!0,id:a.props.data.id,requiredItem:0,data:a.props.data},a.saveModalDetails=a.saveModalDetails.bind(Object(v.a)(Object(v.a)(a))),a.clickDelete=a.clickDelete.bind(Object(v.a)(Object(v.a)(a))),a.replaceModalItem=a.replaceModalItem.bind(Object(v.a)(Object(v.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"clickDelete",value:function(){var e,t=this;(e={id:"".concat(this.state.id)},k.post("/projects/delete",e).then(function(e){return e}).catch(function(e){return console.log(e)})).then(function(){t.setState({isAlive:!1})}).catch(function(e){return console.log(e)})}},{key:"saveModalDetails",value:function(e){var t;t=e,this.setState({data:t})}},{key:"replaceModalItem",value:function(e){this.setState({requiredItem:e})}},{key:"render",value:function(){var e=this.props.data,t=e.id,a=e.name;return this.state.isAlive?l.a.createElement("li",{className:"project"},l.a.createElement("div",{className:"project__header"},l.a.createElement("h2",{className:"project__title"},a),l.a.createElement("button",{className:"btn"},"Edit project"),l.a.createElement("button",{className:"btn btn-danger",onClick:this.clickDelete},"Delete project")),l.a.createElement(I,{projectId:t})):null}}]),t}(n.Component)),A=(a(73),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).onSubmit=function(e){var t=this;e.preventDefault(),O({name:this.state.newItem.name}).then(function(e){var a=t.state.projects||[];a.push({name:e.name,id:e.id}),t.setState({projects:a})}).catch(function(e){return console.log(e)})},a.state={isLoading:!0,projects:[],error:null,newItem:""},a.onChange=a.onChange.bind(Object(v.a)(Object(v.a)(a))),a.onSubmit=a.onSubmit.bind(Object(v.a)(Object(v.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState({newItem:Object(E.a)({},t,a)})}},{key:"fetchProjects",value:function(){var e=this;k.post("/projects/get").then(function(e){return e}).catch(function(e){console.log(e),j(e.response)}).then(function(t){e.setState({projects:t.data,isLoading:!1})}).catch(function(t){e.setState({error:t.response,isLoading:!1})})}},{key:"componentDidMount",value:function(){this.fetchProjects()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.projects,n=e.error;return l.a.createElement("div",{className:"projects"},l.a.createElement("h1",{className:"projects__title title"},"Projects:"),l.a.createElement("ul",{className:"projects__list"},n?l.a.createElement("p",null,n.message):null,t||void 0===a?l.a.createElement("h3",{className:"projects__load-title load-animation"},"Loading"):a.map(function(e){return l.a.createElement(x,{data:e,key:e.id})})),l.a.createElement("form",{className:"form-project",onSubmit:this.onSubmit},l.a.createElement("div",{className:"form__group"},l.a.createElement("div",{className:"input"},l.a.createElement("input",{type:"text",className:"input__field",required:!0,placeholder:"Project name",name:"name",onChange:this.onChange}),l.a.createElement("label",{className:"input__label"},"Project name"))),l.a.createElement("button",{className:"btn btn-color"},"Add New Project")))}}]),t}(n.Component)),q=(a(74),a(75),a(76),a(77),function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement(d.a,null,l.a.createElement("div",{className:"app"},l.a.createElement(_,null),l.a.createElement("main",{className:"content"},l.a.createElement("div",{className:"container content__container"},l.a.createElement(p.a,{exact:!0,path:"/",component:b}),l.a.createElement(p.a,{path:"/register",component:S}),l.a.createElement(p.a,{path:"/login",component:y}),l.a.createElement(p.a,{path:"/profile",component:D}),l.a.createElement(p.a,{path:"/dashboard",component:A}))),l.a.createElement(f,null)))}}]),t}(n.Component));i.a.render(l.a.createElement(q,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.2f870dcd.chunk.js.map