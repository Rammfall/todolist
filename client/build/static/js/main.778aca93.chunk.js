(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(46),l=a.n(i),r=a(2),o=a(3),m=a(5),c=a(4),d=a(6),u=a(14),p=a(16);a(58);var h=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(c.a)(t).call(this,e))).setState({logLinks:[{to:"/",title:"Home",exact:!0},{to:"/login/",title:"Login",exact:!1},{to:"/register/",title:"Register",exact:!1}],regLinks:[{to:"/",title:"Home",exact:!0},{to:"/dashboard/",title:"Dashboard",exact:!1},{to:"/profile/",title:"Profile",exact:!1}]}),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"logOut",value:function(e){e.preventDefault(),localStorage.removeItem("usertoken"),this.props.history.push("/")}},{key:"render",value:function(){var e=s.a.createElement(s.a.Fragment,null,s.a.createElement(p.a,{exact:!1,children:function(e){var t=e.match;return s.a.createElement("li",{className:"nav__item"},console.log(t),s.a.createElement(u.b,{to:"/login",className:t?"nav__link entered":"nav__link"},"Login"))}}),s.a.createElement("li",{className:"nav__item"},s.a.createElement(u.b,{to:"/register",className:"nav__link"},"Registration"))),t=s.a.createElement(s.a.Fragment,null,s.a.createElement("li",{className:"nav__item"},s.a.createElement(u.b,{to:"/dashboard",className:"nav__link"},"Dashboard")),s.a.createElement("li",{className:"nav__item"},s.a.createElement(u.b,{to:"/profile",className:"nav__link"},"Account")),s.a.createElement("li",{className:"nav__item"},s.a.createElement(u.b,{to:"/logout",className:"nav__link",onClick:this.logOut.bind(this)},"Log out")));return s.a.createElement("header",{className:"header"},s.a.createElement("div",{className:"container header__container"},s.a.createElement("a",{href:"/",className:"logo"},"React ToDo List"),s.a.createElement("nav",{className:"nav"},s.a.createElement("ul",{className:"nav__list"},s.a.createElement("li",{className:"nav__item"},s.a.createElement(u.b,{to:"/",className:"nav__link"},"Home")),localStorage.usertoken?t:e))))}}]),t}(n.Component),f=Object(p.d)(h);a(67);function v(){return s.a.createElement("footer",{className:"footer"},s.a.createElement("div",{className:"container footer__container"},s.a.createElement("a",{href:"/",className:"logo-small"},"React ToDo App"),s.a.createElement("p",{className:"footer__year"},"2019"),s.a.createElement("a",{href:"https://github.com/rammfall",className:"footer__link",target:"_blank",rel:"noopener noreferrer"},"My GitHub")))}a(68);var _=function(e){function t(){return Object(r.a)(this,t),Object(m.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"landing"},s.a.createElement("h1",{className:"landing__title title-one"},"Welcome!"),s.a.createElement("p",{className:"landing__text text"},"It is a simplest ToDo list!"),s.a.createElement("h2",{className:"landing__subtitle title"},"You can there:"),s.a.createElement("ul",{className:"landing__list"},s.a.createElement("li",{className:"landing__list-item"},"Register and login"),s.a.createElement("li",{className:"landing__list-item"},"Create, update and remove own projects"),s.a.createElement("li",{className:"landing__list-item"},"Create, update and delete tasks")),s.a.createElement("h2",{className:"landing__subtitle title"},"The app created with:"),s.a.createElement("ul",{className:"landing__list"},s.a.createElement("li",{className:"landing__list-item"},"Node.js(Express.js)"),s.a.createElement("li",{className:"landing__list-item"},"MySQL(Sequelize for models and connection with DB)"),s.a.createElement("li",{className:"landing__list-item"},"JSON Web Token(for authorization)"),s.a.createElement("li",{className:"landing__list-item"},"React(built with Create React App)"),s.a.createElement("li",{className:"landing__list-item"},"SASS(for flexible work with CSS)"),s.a.createElement("li",{className:"landing__list-item"},"Axios(for cross browser queries on server)"),s.a.createElement("li",{className:"landing__list-item"},"Eslint and Stylelint(for linting code)"),s.a.createElement("li",{className:"landing__list-item"},"Heroku with ClearDB")))}}]),t}(n.Component),b=a(13),g=a(20),E=a.n(g),N=function(e){e.data.message},j=function(e){return E.a.post("users/register",{first_name:e.first_name,last_name:e.last_name,email:e.email,password:e.password}).then(function(e){return e.data})},k=function(e){return E.a.post("users/login",{email:e.email,password:e.password}).then(function(e){return e.data}).catch(function(e){console.log(e)})},y=E.a.create({timeout:2e3,headers:{Authorization:localStorage.usertoken?"sdSfapodIF ".concat(localStorage.usertoken):" Token is not get"}}),O=function(e){return y.post("/projects/put",e).then(function(e){return e.data}).catch(function(e){return N(e)})},w=function(e){return y.post("/tasks/put",e).then(function(e){return e.data}).catch(function(e){return N(e)})},S=a(49),I=a(52),D=a(50),L=a.n(D),x=function(){function e(t){Object(r.a)(this,e),this.validations=t}return Object(o.a)(e,[{key:"validate",value:function(e){var t=this.valid();return this.validations.forEach(function(a){if(!t[a.field].isInvalid){var n=e[a.field].toString(),s=a.args||[];("string"===typeof a.method?L.a[a.method]:a.method).apply(void 0,[n].concat(Object(I.a)(s),[e]))!==a.validWhen&&(t[a.field]={isInvalid:!0,message:a.message},t.isValid=!1)}}),t}},{key:"valid",value:function(){var e={};return this.validations.map(function(t){return e[t.field]={isInvalid:!1,message:""}}),Object(S.a)({isValid:!0},e)}}]),e}(),W=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(c.a)(t).call(this,e))).handleInput=function(e){e.preventDefault(),a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,s=t.password,i=a.validator.validate(a.state);a.setState({validation:i}),a.submitted=!0,i.isValid&&k({email:n,password:s}).then(function(e){"success"===e.status?(localStorage.usertoken=e.token,a.props.history.push("/dashboard")):alert(e.info)}).catch(function(e){console.log(e)})},a.validator=new x([{field:"email",method:"isEmpty",validWhen:!1,message:"Email is required"},{field:"email",method:"isEmail",validWhen:!0,message:"That is not valid email"},{field:"password",method:"isEmpty",validWhen:!1,message:"Password is required"},{field:"password",method:"isByteLength",args:[{min:4}],validWhen:!0,message:"In password minimum 4 symbols"},{field:"password",method:"isByteLength",args:[{max:60}],validWhen:!0,message:"In password maximum 60 symbols"}]),a.state={email:"",password:"",validation:a.validator.valid()},a.submitted=!1,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.submitted?this.validator.validate(this.state):this.state.validation;return s.a.createElement("form",{className:"form",noValidate:!0,onSubmit:this.handleSubmit},s.a.createElement("h1",{className:"form__title"},"Log in"),s.a.createElement("p",{className:"form__description"},"on ToDo list for Ruby Garage"),s.a.createElement("div",{className:"form__group"},s.a.createElement("div",{className:e.email.isInvalid?"input error":"input","data-error":e.email.message},s.a.createElement("input",{type:"email",className:"input__field",name:"email",placeholder:"Email",required:!0,onInput:this.handleInput}),s.a.createElement("label",{className:"input__label"},"Email"))),s.a.createElement("div",{className:"form__group"},s.a.createElement("div",{className:e.password.isInvalid?"input error":"input","data-error":e.password.message},s.a.createElement("input",{type:"password",className:"input__field",name:"password",placeholder:"Password",required:!0,onChange:this.handleInput}),s.a.createElement("label",{className:"input__label"},"Password"))),s.a.createElement("button",{className:"btn color-btn"},"Log in"))}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(c.a)(t).call(this,e))).handleInput=function(e){e.preventDefault(),a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.first_name,s=t.last_name,i=t.email,l=t.password,r=a.validator.validate(a.state);a.setState({validation:r}),a.submitted=!0,r.isValid&&j({first_name:n,last_name:s,email:i,password:l}).then(function(e){"success"===e.status?(localStorage.usertoken=e.token,a.props.history.push("/dashboard")):alert(e.info)}).catch(function(e){console.log(e)})},a.validator=new x([{field:"email",method:"isEmpty",validWhen:!1,message:"Email is required"},{field:"email",method:"isEmail",validWhen:!0,message:"That is not valid email"},{field:"first_name",method:"isEmpty",validWhen:!1,message:"First name is required"},{field:"first_name",method:"isByteLength",args:[{min:4}],validWhen:!0,message:"In first name minimum 4 symbols"},{field:"first_name",method:"isByteLength",args:[{max:20}],validWhen:!0,message:"In first name maximum 20 symbols"},{field:"last_name",method:"isEmpty",validWhen:!1,message:"Last name is required"},{field:"last_name",method:"isByteLength",args:[{min:4}],validWhen:!0,message:"In last name minimum 4 symbols"},{field:"last_name",method:"isByteLength",args:[{max:20}],validWhen:!0,message:"In last name maximum 20 symbols"},{field:"password",method:"isEmpty",validWhen:!1,message:"Password is required"},{field:"password",method:"isByteLength",args:[{min:4}],validWhen:!0,message:"In password minimum 4 symbols"},{field:"password",method:"isByteLength",args:[{max:60}],validWhen:!0,message:"In password maximum 60 symbols"}]),a.state={first_name:"",last_name:"",email:"",password:"",validation:a.validator.valid()},a.submitted=!1,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.submitted?this.validator.validate(this.state):this.state.validation;return s.a.createElement("form",{className:"form",noValidate:!0,onSubmit:this.handleSubmit},s.a.createElement("h1",{className:"form__title"},"Sign in"),s.a.createElement("p",{className:"form__description"},"on ToDo list for Ruby Garage"),s.a.createElement("div",{className:"form__group"},s.a.createElement("div",{className:e.first_name.isInvalid?"input error":"input","data-error":e.first_name.message},s.a.createElement("input",{type:"text",name:"first_name",className:"input__field",placeholder:"First name",required:!0,onInput:this.handleInput}),s.a.createElement("label",{className:"input__label"},"First name"))),s.a.createElement("div",{className:"form__group"},s.a.createElement("div",{className:e.last_name.isInvalid?"input error":"input","data-error":e.last_name.message},s.a.createElement("input",{type:"text",name:"last_name",className:"input__field",placeholder:"Last name",required:!0,onInput:this.handleInput}),s.a.createElement("label",{className:"input__label"},"Last name"))),s.a.createElement("div",{className:"form__group"},s.a.createElement("div",{className:e.email.isInvalid?"input error":"input","data-error":e.email.message},s.a.createElement("input",{type:"email",name:"email",className:"input__field",placeholder:"Email",required:!0,onInput:this.handleInput}),s.a.createElement("label",{className:"input__label"},"Email"))),s.a.createElement("div",{className:"form__group"},s.a.createElement("div",{className:e.password.isInvalid?"input error":"input","data-error":e.password.message},s.a.createElement("input",{type:"password",name:"password",className:"input__field",placeholder:"Password",required:!0,onInput:this.handleInput}),s.a.createElement("label",{className:"input__label"},"Password"))),s.a.createElement("button",{className:"btn color-btn"},"Sign in"))}}]),t}(n.Component),C=a(51),T=a.n(C),B=(a(150),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(c.a)(t).call(this,e))).state={first_name:"",last_name:"",email:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.usertoken,t=T()(e);console.log(1),this.setState({first_name:t.first_name,last_name:t.last_name,email:t.email})}},{key:"render",value:function(){return s.a.createElement("div",{className:"profile"},s.a.createElement("h1",{className:"title profile__title"},"Your Profile"),s.a.createElement("dl",{className:"profile__list"},s.a.createElement("dt",{className:"profile__term"},"First name: "),s.a.createElement("dd",{className:"profile__description"},this.state.first_name),s.a.createElement("dt",{className:"profile__term"},"Last name: "),s.a.createElement("dd",{className:"profile__description"},this.state.last_name),s.a.createElement("dt",{className:"profile__term"},"Email: "),s.a.createElement("dd",{className:"profile__description"},this.state.email)))}}]),t}(n.Component)),P=a(9),A=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(c.a)(t).call(this,e))).state={data:a.props.data,isAlive:!0},a.clickDelete=a.clickDelete.bind(Object(P.a)(Object(P.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"clickDelete",value:function(){var e,t=this;(e={id:"".concat(this.state.data.id)},y.post("/tasks/delete",e).then(function(e){return e}).catch(function(e){return console.log(e)})).then(function(){t.setState({isAlive:!1})}).catch()}},{key:"render",value:function(){var e=this.state.data,t=e.name,a=e.deadline;return this.state.isAlive?s.a.createElement("li",{className:"task"},s.a.createElement("h4",{className:"task__title"},t),s.a.createElement("div",{className:"task__date"},a),s.a.createElement("button",{className:"btn btn-color"},"Edit task"),s.a.createElement("button",{className:"btn btn-danger",onClick:this.clickDelete},"Delete task")):""}}]),t}(n.Component),M=(a(151),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(c.a)(t).call(this,e))).handlerInput=function(e){e.preventDefault(),a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handlerSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,s=t.deadline,i=a.validator.validate(a.state);a.setState({validation:i}),a.submitted=!0,i.isValid&&w({name:n,deadline:s,project_id:"".concat(a.state.project_id)}).then(function(e){var t=a.state.tasks||[],n=new Date(e.info.deadline).toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric"});t.push({deadline:n,id:e.info.id,name:e.info.name,status:e.info.status}),console.log(t),a.setState({tasks:t})}).catch(function(e){return console.log(e)})},a.validator=new x([{field:"name",method:"isEmpty",validWhen:!1,message:"Task name is required"},{field:"name",method:"isByteLength",args:[{min:4}],validWhen:!0,message:"Task name should have minimum 4 symbols"},{field:"name",method:"isByteLength",args:[{max:30}],validWhen:!0,message:"Task name should have maximum 60 symbols"},{field:"deadline",method:"isEmpty",validWhen:!1,message:"Deadline is required"}]),a.state={project_id:a.props.projectId,isLoading:!0,tasks:[],error:null,name:"",deadline:"",validation:a.validator.valid()},a.submitted=!1,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"fetchTasks",value:function(){var e,t=this;(e={id:"".concat(this.props.projectId)},y.post("/tasks/get",e).then(function(e){return e}).catch(function(e){return e})).then(function(e){t.setState({tasks:e.data,isLoading:!1})}).catch(function(e){t.setState({error:e.response,isLoading:!1})})}},{key:"componentDidMount",value:function(){this.fetchTasks()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.tasks,n=this.submitted?this.validator.validate(this.state):this.state.validation;return s.a.createElement("div",{className:"tasks"},s.a.createElement("h3",{className:"tasks__title"},"Project tasks:"),s.a.createElement("ul",{className:"tasks__list"},t||void 0===a?s.a.createElement("p",{className:"load-animation"},"Loading..."):a.map(function(e){return s.a.createElement(A,{data:e,key:e.id})})),s.a.createElement("form",{className:"tasks__form",noValidate:!0,onSubmit:this.handlerSubmit},s.a.createElement("div",{className:"form__group tasks__form-group"},s.a.createElement("div",{className:n.name.isInvalid?"input error":"input","data-error":n.name.message},s.a.createElement("input",{type:"text",name:"name",placeholder:"Task name",className:"input__field",onInput:this.handlerInput,required:!0}),s.a.createElement("label",{className:"input__label"},"Task name"))),s.a.createElement("div",{className:"form__group tasks__form-group"},s.a.createElement("div",{className:n.deadline.isInvalid?"input error":"input","data-error":n.deadline.message},s.a.createElement("input",{type:"date",name:"deadline",placeholder:"Deadline task",className:"input__field input__date",required:!0,onInput:this.handlerInput}),s.a.createElement("label",{className:"input__label"},"Task deadline"))),s.a.createElement("button",{type:"submit",className:"btn btn-color"},"Add task")))}}]),t}(n.Component)),V=(a(152),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(c.a)(t).call(this,e))).state={isAlive:!0,id:a.props.data.id,requiredItem:0,data:a.props.data},a.saveModalDetails=a.saveModalDetails.bind(Object(P.a)(Object(P.a)(a))),a.clickDelete=a.clickDelete.bind(Object(P.a)(Object(P.a)(a))),a.replaceModalItem=a.replaceModalItem.bind(Object(P.a)(Object(P.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"clickDelete",value:function(){var e,t=this;(e={id:"".concat(this.state.id)},y.post("/projects/delete",e).then(function(e){return e}).catch(function(e){return console.log(e)})).then(function(){t.setState({isAlive:!1})}).catch(function(e){return console.log(e)})}},{key:"saveModalDetails",value:function(e){var t;t=e,this.setState({data:t})}},{key:"replaceModalItem",value:function(e){this.setState({requiredItem:e})}},{key:"render",value:function(){var e=this.props.data,t=e.id,a=e.name;return this.state.isAlive?s.a.createElement("li",{className:"project"},s.a.createElement("div",{className:"project__header"},s.a.createElement("h2",{className:"project__title"},a),s.a.createElement("button",{className:"btn"},"Edit project"),s.a.createElement("button",{className:"btn btn-danger",onClick:this.clickDelete},"Delete project")),s.a.createElement(M,{projectId:t})):null}}]),t}(n.Component)),R=(a(153),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(m.a)(this,Object(c.a)(t).call(this,e))).handleInput=function(e){e.preventDefault(),a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state.name,n=a.validator.validate(a.state);a.setState({validation:n}),a.submitted=!0,n.isValid&&O({name:t}).then(function(e){var t=a.state.projects||[];t.push({name:e.name,id:e.id}),a.setState({projects:t})}).catch(function(e){return console.log(e)})},a.validator=new x([{field:"name",method:"isEmpty",validWhen:!1,message:"Name project is required"},{field:"name",method:"isByteLength",args:[{min:4}],validWhen:!0,message:"Name project should have minimum 4 symbols"},{field:"name",method:"isByteLength",args:[{max:30}],validWhen:!0,message:"Name project should have maximum 30 symbols"}]),a.state={isLoading:!0,projects:[],error:null,name:"",validation:a.validator.valid()},a.submitted=!1,a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"fetchProjects",value:function(){var e=this;y.post("/projects/get").then(function(e){return e}).catch(function(e){console.log(e),N(e.response)}).then(function(t){e.setState({projects:t.data,isLoading:!1})}).catch(function(t){e.setState({error:t.response,isLoading:!1})})}},{key:"componentDidMount",value:function(){this.fetchProjects()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.projects,n=e.error,i=this.submitted?this.validator.validate(this.state):this.state.validation;return s.a.createElement("div",{className:"projects"},s.a.createElement("h1",{className:"projects__title title"},"Projects:"),s.a.createElement("ul",{className:"projects__list"},n?s.a.createElement("p",null,n.message):null,t||void 0===a?s.a.createElement("h3",{className:"projects__load-title load-animation"},"Loading"):a.map(function(e){return s.a.createElement(V,{data:e,key:e.id})})),s.a.createElement("form",{className:"form-project",noValidate:!0,onSubmit:this.handleSubmit},s.a.createElement("div",{className:"form__group"},s.a.createElement("div",{className:i.name.isInvalid?"input error":"input","data-error":i.name.message},s.a.createElement("input",{type:"text",className:"input__field",required:!0,placeholder:"Project name",name:"name",onInput:this.handleInput}),s.a.createElement("label",{className:"input__label"},"Project name"))),s.a.createElement("button",{className:"btn btn-color"},"Add New Project")))}}]),t}(n.Component)),F=(a(154),a(155),a(156),a(157),function(e){function t(){return Object(r.a)(this,t),Object(m.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(u.a,null,s.a.createElement("div",{className:"app"},s.a.createElement(f,null),s.a.createElement("main",{className:"content"},s.a.createElement("div",{className:"container content__container"},s.a.createElement(p.a,{exact:!0,path:"/",component:_}),s.a.createElement(p.a,{path:"/register",component:q}),s.a.createElement(p.a,{path:"/login",component:W}),s.a.createElement(p.a,{path:"/profile",component:B}),s.a.createElement(p.a,{path:"/dashboard",component:R}))),s.a.createElement(v,null)))}}]),t}(n.Component));l.a.render(s.a.createElement(F,null),document.getElementById("root"))},53:function(e,t,a){e.exports=a(158)},58:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.778aca93.chunk.js.map